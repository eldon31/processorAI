{
  "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
  "title": "Cleanup after function cancellation",
  "num_chunks": 6,
  "total_chars": 3753,
  "chunks": [
    {
      "index": 0,
      "text": "On this page\n- [Cleanup after function cancellation](\\docs\\examples\\cleanup-after-function-cancellation#cleanup-after-function-cancellation)\n- [Quick snippet](\\docs\\examples\\cleanup-after-function-cancellation#quick-snippet)\n- [More context](\\docs\\examples\\cleanup-after-function-cancellation#more-context)\n[Examples](\\docs\\examples)",
      "char_count": 333,
      "token_count": 75,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 75,
        "has_context": true
      }
    },
    {
      "index": 1,
      "text": "Cleanup after function cancellation\nWhen function runs are cancelled, you may want to perform some sort of post-cancellation code. This example will use the\n[```\ninngest/function.cancelled\n```](\\docs\\reference\\system-events\\inngest-function-cancelled)\nsystem event.\nWhether your function run is cancelled via\n[```\ncancelOn\n```](\\docs\\features\\inngest-functions\\cancellation\\cancel-on-events)\n[event](\\docs\\features\\inngest-functions\\cancellation\\cancel-on-events)\n,\n[REST API](\\docs\\guides\\cancel-running-functions)\nor\n[bulk cancellation](\\docs\\platform\\manage\\bulk-cancellation)\n, this method will work the same.",
      "char_count": 613,
      "token_count": 151,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 151,
        "has_context": true
      }
    },
    {
      "index": 2,
      "text": "Cleanup after function cancellation\nQuick snippet\nHere is an Inngest function and a corresponding function that will be run whenever the original function is cancelled. This uses the function trigger's\n```\nif\n```\nparameter to filter the\n```\ninngest/function.cancelled\n```\nevent to only be triggered for the original function.\nCopy Copied\n```\nconst inngest = new Inngest ({ id : \"newsletter-app\" });\n\n// This is our \"import\" function that will get cancelled\nexport const importAllContacts = inngest .createFunction (\n{\nid : \"import-all-contacts\" ,\ncancelOn : [{ event : \"contacts/import.cancelled\" , if : \"async.data.importId == event.data.importId\" }]\n} ,\n{ event : \"contacts/import.requested\" } ,\nasync ({ event , step  }) => {\n// This is a long running function\n}\n)\n\n// This function will be run only when the matching function_id has a run that is cancelled\nexport const cleanupCancelledImport = inngest .createFunction (\n{\nname : \"Cleanup cancelled import\" ,\nid : \"cleanup-cancelled-import\"\n} ,\n{\nevent : \"inngest/function.cancelled\" ,\n// The function ID is a hyphenated slug of the App ID w/ the functions\" id\nif : \"event.data.function_id == 'newsletter-app-import-all-contacts'\"\n} ,\nasync ({ event , step , logger }) => {\n// This code will execute after your function is cancelled\n\n// The event that triggered our original function run is passed nested in our event payload\nconst originalTriggeringEvent = event . data .event;\nlogger .info ( `Import was cancelled: ${ originalTriggeringEvent . data .importId } ` )\n}\n);\n```\nAn example cancellation event payload:\nCopy Copied\n```\n{\n\"name\" : \"inngest/function.cancelled\" ,\n\"data\" : {\n\"error\" : {\n\"error\" : \"function cancelled\" ,\n\"message\" : \"function cancelled\" ,\n\"name\" : \"Error\"\n} ,\n\"event\" : {\n\"data\" : {\n\"importId\" : \"bdce1b1b-6e3a-43e6-84c2-2deb559cdde6\"\n} ,\n\"id\" : \"01JDJK451Y9KFGE5TTM2FHDEDN\" ,\n\"name\" : \"contacts/import.requested\" ,\n\"ts\" : 1732558407003 ,\n\"user\" : {}\n} ,\n\"events\" : [\n{\n\"data\" : {\n\"importId\" : \"bdce1b1b-6e3a-43e6-84c2-2deb559cdde6\"\n} ,\n\"id\" : \"01JDJK451Y9KFGE5TTM2FHDEDN\" ,\n\"name\" : \"contacts/import.requested\" ,\n\"ts\" : 1732558407003 ,\n\"user\" : {}\n}\n] ,\n\"function_id\" : \"newsletter-app-import-all-contacts\" ,\n\"run_id\" : \"01JDJKGTGDVV4DTXHY6XYB7BKK\"\n} ,\n\"id\" : \"01JDJKH1S5P2YER8PKXPZJ1YZJ\" ,\n\"ts\" : 1732570023717\n}\n```",
      "char_count": 2297,
      "token_count": 728,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 728,
        "has_context": true
      }
    },
    {
      "index": 3,
      "text": "Cleanup after function cancellation\nMore context\nCheck the resources below to learn more about building email sequences with Inngest.",
      "char_count": 133,
      "token_count": 24,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 24,
        "has_context": true
      }
    },
    {
      "index": 4,
      "text": "Cleanup after function cancellation\nMore context\nReference: inngest/function.cancelled system event\n[Learn more about the system event.](\\docs\\reference\\system-events\\inngest-function-cancelled)",
      "char_count": 194,
      "token_count": 42,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 42,
        "has_context": true
      }
    },
    {
      "index": 5,
      "text": "Cleanup after function cancellation\nMore context\nGuide: Function cancellation\n[Learn about the different ways to cancel a function run.](\\docs\\features\\inngest-functions\\cancellation)",
      "char_count": 183,
      "token_count": 39,
      "metadata": {
        "title": "Cleanup after function cancellation",
        "source": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "chunk_method": "hybrid",
        "file_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\Docs\\inngest_overall\\examples_cleanup-after-function-cancellation.md",
        "file_name": "examples_cleanup-after-function-cancellation.md",
        "file_size": 3954,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "5cdf6d68e6d236173fa7e7f744e6f393512416ba4c3699fe654acdcf28e38d2b",
        "author": null,
        "created_at": "2025-10-12T23:58:24.093014",
        "modified_at": "2025-10-12T23:58:24.093679",
        "page_count": null,
        "word_count": 456,
        "extracted_at": "2025-10-13T20:03:13.060193",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 6,
        "token_count": 39,
        "has_context": true
      }
    }
  ]
}