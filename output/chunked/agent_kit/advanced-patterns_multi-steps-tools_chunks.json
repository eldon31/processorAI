{
  "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
  "title": "##### Get Started",
  "num_chunks": 11,
  "total_chars": 5917,
  "chunks": [
    {
      "index": 0,
      "text": "Get Started\n- [Overview](\\overview)\n- [Quick start](\\getting-started\\quick-start)\n- [Installation](\\getting-started\\installation)\n- [Local development](\\getting-started\\local-development)",
      "char_count": 187,
      "token_count": 47,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 47,
        "has_context": true
      }
    },
    {
      "index": 1,
      "text": "Concepts\n- [Agents](\\concepts\\agents)\n- [Tools](\\concepts\\tools)\n- [Networks](\\concepts\\networks)\n- [State](\\concepts\\state)\n- [Routers](\\concepts\\routers)\n- [History](\\concepts\\history)\n- [Memory](\\concepts\\memory)\n- [Models](\\concepts\\models)\n- [Deployment](\\concepts\\deployment)",
      "char_count": 281,
      "token_count": 95,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 95,
        "has_context": true
      }
    },
    {
      "index": 2,
      "text": "Streaming\n- [Overview](\\streaming\\overview)\n- [Usage Guide](\\streaming\\usage-guide)\n- [Events](\\streaming\\events)\n- [Transport](\\streaming\\transport)\n- [Provider](\\streaming\\provider)",
      "char_count": 183,
      "token_count": 54,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 54,
        "has_context": true
      }
    },
    {
      "index": 3,
      "text": "Advanced Patterns\n- [Deterministic state routing](\\advanced-patterns\\routing)\n- [MCP as tools](\\advanced-patterns\\mcp)\n- [Human in the Loop](\\advanced-patterns\\human-in-the-loop)\n- [Multi-steps tools](\\advanced-patterns\\multi-steps-tools)\n- [Configuring Retries](\\advanced-patterns\\retries)\n- [Configuring Multi-tenancy](\\advanced-patterns\\multitenancy)\n- [UI Streaming with useAgent](\\advanced-patterns\\legacy-ui-streaming)",
      "char_count": 424,
      "token_count": 117,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 117,
        "has_context": true
      }
    },
    {
      "index": 4,
      "text": "Guided Tour\n- [The three levels of AI apps](\\guided-tour\\overview)\n- [1. Explaining a given code file](\\guided-tour\\ai-workflows)\n- [2. Complex code analysis](\\guided-tour\\agentic-workflows)\n- [3. Autonomous Bug Solver](\\guided-tour\\ai-agents)",
      "char_count": 243,
      "token_count": 75,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 75,
        "has_context": true
      }
    },
    {
      "index": 5,
      "text": "Integrations\n- [E2B - Sandboxes for AI Agents](\\integrations\\e2b)\n- [Browserbase - AI Browsers](\\integrations\\browserbase)\n- [Smithery - MCP Registry](\\integrations\\smithery)\nclose\nOn this page\n- [Creating a multi-steps tool](#creating-a-multi-steps-tool)\n- [Using the multi-steps tool in your AgentKit network](#using-the-multi-steps-tool-in-your-agentkit-network)\n- [Going further](#going-further)\nAdvanced Patterns",
      "char_count": 417,
      "token_count": 116,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 116,
        "has_context": true
      }
    },
    {
      "index": 6,
      "text": "Multi-steps tools\nUse multi-steps tools to create more complex Agents.\nIn this guide, we'll learn how to create a multi-steps tool that can be used in your AgentKit\n[Tools](\\concepts\\tools)\nto reliably perform complex operations.\nBy combining your AgentKit network with Inngest, each step of your tool will be\n**retried automatically**\nand you'll be able to\n**configure concurrency and throttling**\n.\n**Prerequisites**\nYour AgentKit network\n[must be configured with Inngest](\\getting-started\\local-development#1-install-the-inngest-package)\n.",
      "char_count": 542,
      "token_count": 130,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 130,
        "has_context": true
      }
    },
    {
      "index": 7,
      "text": "Multi-steps tools\nCreating a multi-steps tool\nCreating a multi-steps tool is done by creating an Inngest Function that will be used as a tool in your AgentKit network.\nTo create an Inngest Function, you'll need to create an Inngest Client:\nsrc/inngest/client.ts Copy Ask AI\n```\nimport { Inngest } from 'inngest' ;\n\nconst inngest = new Inngest ({\nid: 'my-agentkit-network' ,\n});\n```\nThen, we will implement our AgentKit Tool as an Inngest Function with multiple steps.\nFor example, we'll create a tool that searches for perform a research by crawling the web:\nsrc/inngest/tools/research-web.ts Copy Ask AI\n```\nimport { inngest } from '../client' ;\n\nexport const researchWebTool = inngest . createFunction ({\nid: 'research-web-tool' ,\n}, {\nevent: \"research-web-tool/run\"\n}, async ({ event , step }) => {\nconst { input } = event . data ;\n\nconst searchQueries = await step . ai . infer ( 'generate-search-queries' , {\nmodel: step . ai . models . openai ({ model: \"gpt-4o\" }),\n// body is the model request, which is strongly typed depending on the model\nbody: {\nmessages: [{\nrole: \"user\" ,\ncontent: `From the given input, generate a list of search queries to perform. \\n ${ input } ` ,\n}],\n},\n});\n\nconst searchResults = await Promise . all (\nsearchQueries . map ( query => step . run ( 'crawl-web' , async ( query ) => {\n// perform crawling...\n})\n));\n\nconst summary = await step . ai . infer ( 'summarize-search-results' , {\nmodel: step . ai . models . openai ({ model: \"gpt-4o\" }),\nbody: {\nmessages: [{\nrole: \"user\" ,\ncontent: `Summarize the following search results: \\n ${ searchResults . join ( ' \\n ' ) } ` ,\n}],\n},\n});\n\nreturn summary . choices [ 0 ]. message . content ;\n});\n```\nOur\n```\nresearchWebTool\n```\nInngest defines 3 main steps.\n- The `step.ai.infer()` call will offload the LLM requests to the Inngest infrastructe which will also handle retries.\n- The `step.run()` call will run the `crawl-web` step in parallel.\nAll the above steps will be retried automatically in case of failure, resuming the AgentKit network upon completion of the tool.",
      "char_count": 2052,
      "token_count": 541,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 541,
        "has_context": true
      }
    },
    {
      "index": 8,
      "text": "Multi-steps tools\nUsing the multi-steps tool in your AgentKit network\nWe can now add our\n```\nresearchWebTool\n```\nto our AgentKit network:\nsrc/inngest/agent-network.ts Copy Ask AI\n```\nimport { createAgent , createNetwork , openai } from '@inngest/agent-kit' ;\nimport { createServer } from '@inngest/agent-kit/server' ;\n\nimport { researchWebTool } from './inngest/tools/research-web' ;\n\n\nconst deepResearchAgent = createAgent ({\nname: 'Deep Research Agent' ,\ntools: [ researchWebTool ],\n});\n\nconst network = createNetwork ({\nname: 'My Network' ,\ndefaultModel: openai ({ model: \"gpt-4o\" }),\nagents: [ deepResearchAgent ],\n});\n\nconst server = createServer ({\nnetworks: [ network ],\nfunctions: [ researchWebTool ],\n});\n\nserver . listen ( 3010 , () => console . log ( \"Agent kit running!\" ));\n```\nWe first import our\n```\nresearchWebTool\n```\nfunction and pass it to the\n```\ndeepResearchAgent\n```\n[```\ntools\n```](\\reference\\create-agent#param-tools)\n[array](\\reference\\create-agent#param-tools)\n.\nFinally, we also need to pass the\n```\nresearchWebTool\n```\nfunction to the\n```\ncreateServer()\n```\n's\n```\nfunctions\n```\narray.",
      "char_count": 1113,
      "token_count": 304,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 304,
        "has_context": true
      }
    },
    {
      "index": 9,
      "text": "Multi-steps tools\nConfiguring Multitenancy\n[Learn how to configure user-based capacity for your AgentKit network.](\\advanced-patterns\\multitenancy)",
      "char_count": 147,
      "token_count": 35,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 35,
        "has_context": true
      }
    },
    {
      "index": 10,
      "text": "Multi-steps tools\nCustomizing the retries\n[Learn how to customize the retries of your multi-steps tools.](\\advanced-patterns\\retries)\n[Human in the Loop Previous](\\advanced-patterns\\human-in-the-loop)\n[Configuring Retries Next](\\advanced-patterns\\retries)\n⌘ I\nAssistant Responses are generated using AI and may contain mistakes.",
      "char_count": 328,
      "token_count": 79,
      "metadata": {
        "title": "##### Get Started",
        "source": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "chunk_method": "hybrid",
        "file_path": "Docs\\agent_kit\\advanced-patterns_multi-steps-tools.md",
        "file_name": "advanced-patterns_multi-steps-tools.md",
        "file_size": 6286,
        "file_format": ".md",
        "mime_type": "text/markdown",
        "sha256_hash": "1b86c59d307907cedda8f7431dc342cd45fc887d87399a042e4e4a369e5d59d9",
        "author": null,
        "created_at": "2025-10-12T23:51:09.531199",
        "modified_at": "2025-10-12T23:51:09.531703",
        "page_count": null,
        "word_count": 774,
        "extracted_at": "2025-10-13T19:59:14.753900",
        "processing_method": "markdown_docling",
        "custom_metadata": {},
        "total_chunks": 11,
        "token_count": 79,
        "has_context": true
      }
    }
  ]
}